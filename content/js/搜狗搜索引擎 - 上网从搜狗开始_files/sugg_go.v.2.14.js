var server_url="http://www.sogou.com/";function sugTemplate(){}if((window.navigator.appName.toUpperCase().indexOf("MICROSOFT")>=0)&&(document.execCommand)){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}sugTemplate.prototype.vmap={"60":".v.4","69":".v.1","317":".v.3","312":".v.1","145":".v.1","91":".v.1","273":".v.1","244":".v.1","210":".v.3","206":".v.1","166":".v.1","164":".v.1","163":".v.1","113":".v.1","330":".v.1"};sugTemplate.prototype.cutTitle=function(j,b){var h=navigator.userAgent.indexOf("MSIE 6")!=-1&&!window.opera;if(h){j.style.height=null}var f="...",g;j.innerHTML="我";g=j.offsetHeight;var d=/^(.*?)(<b>(.*?)<\/b>)?(<span><\/span>)?$/i.exec(b);var a=[d[1],d[3],d[4]?d[4]:""];var c=a[0].length+(a[1]?a[1].length:0);j.innerHTML=b;while(j.offsetHeight>g*5/4){j.innerHTML=a[0].substring(0,c)+(c>a[0].length?"<b>"+a[1].substring(0,c-a[0].length)+f+"</b>":f)+a[2];c--}if(h){j.style.height="27px"}};sugTemplate.prototype.cutAllTitle=function(a,c){for(var b=0;b<a.length;b++){this.cutTitle(a[b],c[b])}};sugTemplate.prototype.revertAllTitle=function(a,c){for(var b=0;b<a.length;b++){a[b].innerHTML=c[b]}};sugTemplate.prototype.len=function(a){return a.replace(/\[\/?em\]/g,"").replace(/[^\x00-\xff]/g,"rr").length};sugTemplate.prototype.cutLength=function(d,a,b,c){b=b||"...";c=c||3;if(this.len(d)>a){do{if(d.lastIndexOf("[em]")==d.length-4){d=d.substring(0,d.length-4)}else{if(d.lastIndexOf("[/em]")==d.length-5){d=d.substring(0,d.length-5)}else{d=d.substring(0,d.length-1)}}}while(d&&(this.len(d)+c>a));if(d.lastIndexOf("[/em]")<d.lastIndexOf("[em]")){d=d.substring(0,d.lastIndexOf("[em]"))+d.substring(d.lastIndexOf("[em]")+4)}return d+b}return d};sugTemplate.prototype.$c=function(d,c,a){var b=document.createElement(d);if(c){c.appendChild(b)}if(a){b.className=a}return b};sugTemplate.prototype.$=function(a){return document.getElementById(a)};sugTemplate.prototype.parseXML=function(a){if(window.DOMParser){tmp=new DOMParser();xml=tmp.parseFromString(a,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(a)}return xml.documentElement};sugTemplate.prototype.selectNodes=function(d,f){function h(k,n){var m=[];for(var o=0;o<k.length;o++){for(var l=0;l<k[o].childNodes.length;l++){if(k[o].childNodes[l].nodeName==n){m[m.length]=k[o].childNodes[l]}}}return m}var b=[];var a=[d];var g=f.split("/");for(var c=0;c<g.length;c++){a=h(a,g[c]);if(a==null){return[]}}return a};sugTemplate.prototype.buildTitle=function(f,c,a,d){var b=this.$c("h3",f,"sugtype");b.innerHTML=['<a id="sgtitle" onfocus="this.blur();" href="',a?(a+'" target="_blank'):("/sogou?ie=utf8&query="+c.query),'">',this.cutLength(d?d:decodeURIComponent(c.query),44),"</a>"].join("");return b};sugTemplate.prototype.buildMoreHint=function(d,b){var a=this.$c("div",d,"morehint");var c=this.$c("a",a);c.innerHTML="更多相关结果&gt;&gt;";c.href="http://www.sogou.com/web?query="+b.query;c.target="_blank";c.setAttribute("hideFocus","hidefocus")};sugTemplate.prototype.markRed=function(c,b,a){b=b||"<em>";a=a||"</em>";if(c.indexOf(b)>0){return c}if(c.indexOf("[em]")>=0){c=c.replace(/\[em\]/g,b).replace(/\[\/em\]/g,a)}return c};sugTemplate.prototype.escape=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};sugTemplate.prototype.cutRed=function(a){return a.replace(/\[\/?em\]/g,"")};sugTemplate.prototype.buildVRTitle=function(a,d,c){var b=this.$c("a",this.$c("h3",a,"se_embed_title"));var f=d.title;f=this.cutLength(f,c);f=this.escape(f);f=this.cutRed(f);b.href=d.url;b.target="_blank";b.title=this.cutRed(d.title);b.innerHTML=f;return b};sugTemplate.prototype.buildContent=function(a,g){var k=this.$c("div",a,"querylist");for(var h=0;h<2;h++){var b=this.$c("a",k,"qitem");b.target="_blank";b.href=g.docs[h].url;b.onfocus=function(){this.blur()};var f=this.$c("strong",b,"qtitle");var j=this.$c("span",f,"siteico");if(g.docs[h].favicon){j.style.background="url("+g.docs[h].favicon+") no-repeat scroll 6px 50% transparent"}j.innerHTML=this.cutLength(g.docs[h].title,54);if(g.docs[h].content){var c=this.$c("span",b,"qsummary");c.innerHTML=this.cutLength(this.escape(g.docs[h].content),106)}var d=this.$c("span",b,"qcite");if(g.docs[h]["url"]&&g.docs[h]["url"].indexOf("://")>0){d.innerHTML=decodeURIComponent(g.docs[h]["url"].split("://")[1].split("/")[0])}else{d.innerHTML="www.sogou.com"}}this.buildMoreHint(a,g)};sugTemplate.prototype.build=function(a,b,j,g){if(!b){return false}var d=this,h=-1,c=0;for(;c<j.length;c++){if(j[c]==decodeURIComponent(b.query)){h=c;break}}d.pv(b.query,b.type||"-1",h,b.doc_num||0);g[h]=b.type||"-1";if(!b.doc_num||!b.docs){return false}a.onclick=function(m){if((m&&(m.button!=0))||((!m)&&(window.event.button!=0))){return}try{m=m||window.event;var o=((m.target)?m.target:m.srcElement),i;while(o&&o.tagName){i=o.tagName.toUpperCase();if(i=="A"){d.pv(b.query,b.type,h,b.doc_num,o.id||"sgcontent",o.href)}if(i=="DIV"){break}o=o.parentNode}}catch(n){}};if(!b.type||b.type==100){this.buildTitle(a,b);this.buildContent(a,b)}else{if(!this["build"+b.type]){if((b.type=="317"||b.type=="60")&&!d.curtime){if(window.standardtime){var k=window.standardtime;window.standardtime=function(n,m){d.curtime=n;return k(n,m)}}else{window.standardtime=function(n,m){d.curtime=n}}var l=document.createElement("script");l.charset="gb2312";l.src="websearch/features/standardtimeadjust.jsp?a="+Math.random();document.body.appendChild(l)}var f=document.createElement("script");f.charset="gb2312";f.src=server_url+"js/sugtemp/build"+b.type+(this.vmap[b.type]||"")+".js";document.body.appendChild(f)}this.buildVR(a,b,0)}return true};sugTemplate.prototype.buildVR=function(i,f,b){if(typeof this["build"+f.type]=="function"){try{var h=f.docs,g=h[0],a=this.parseXML(h[0].xml);g.url=this.selectNodes(a,"url")[0].firstChild.nodeValue;g.title=this.selectNodes(a,"title")[0].firstChild.nodeValue;g.domain=g.url.split("://")[1].split("/")[0];this["build"+f.type](i,f,g,a)}catch(d){}}else{if(b<=10){var c=this;setTimeout(function(){c.buildVR(i,f,b)},30)}else{this.buildTitle(i,f);this.buildContent(i,f)}}};sugTemplate.prototype.reg=new RegExp("{{(.*?)}}","g");sugTemplate.prototype.pv=function(g,d,h,c,a,b){try{imgurl=["http://pb.sogou.com/",a?"cl.gif":"pv.gif","?uigs_productid=webgo"];imgurl.push("&query=");imgurl.push(encodeURIComponent(g));imgurl.push("&type=");imgurl.push(d);imgurl.push("&pos=");imgurl.push(h);imgurl.push("&num=");imgurl.push(c);if(!a){if(this.lastpv==imgurl.join("")){return}this.lastpv=imgurl.join("")}else{imgurl.push("&uigs_cl=");imgurl.push(a);imgurl.push(encodeURIComponent("&href="+b))}imgurl.push("&uigs_t=");imgurl.push((new Date()).getTime());(new Image()).src=imgurl.join("")}catch(f){}};sugTemplate.prototype.buildTemplate=function(b,a){var d=this;function c(f,h){h=h.split("@");var g=d.selectNodes(a,""+h[0]);if(g.length>0){if(h.length>1){return g[0].getAttribute(h[1])}else{return g[0].firstChild.nodeValue.replace(/\ue40a/g,"").replace(/\ue40b/g,"")}}return""}return b.replace(this.reg,c)};function sogouSugg(newPara){if(typeof SugPara!="object"){SugPara={}}var isIe=navigator.userAgent.indexOf("MSIE")!=-1&&!window.opera;var that=this,tophint,MAX_RETRY_FETCH_SITE=3,handleRetry=MAX_RETRY_FETCH_SITE-1,template=new sugTemplate(),myPara=newPara||SugPara,on=newPara?0:1,d=document,inputid=myPara.inputid||"query",sugType=myPara.sugType||"web",productId=myPara.productId||sugType,postFix=myPara.postFix||"",preFix=myPara.preFix||"",revsd=myPara.revsd||0,suggestRid=myPara.suggestRid||"",normalRid=myPara.normalRid||"",enableSug=true,useParent=myPara.useParent||0,abtestid=myPara.abtestid||"",ipn=myPara.ipn||"",domain=myPara.domain||"http://w.sugg.sogou.com",uri=myPara.uri||"/sugg/ajaj_json.jsp",suggUri=domain+uri,firstRun=1,suggDiv,suggIfm=null,suggLis=[],suggOText=[],input_elem,input_form,mousedown_ontr=0,noneed_query="",lastinput_query="",sending_timer=0,highlight_li=-1,jsonData=[],jsonDataTongji=[],jsonDataTongji0=[],jsonDataTongji1=[],goTongjiId=[],hasPersonal=0,hasPersonal1=0,userInputString="",cache={},sitecache={},ajaj=null,ajaj2=null,originalQuery="",suggestWordId=-1,input_time=0,oldfunc=function(){},oldfunc2=function(){},contentDiv,siteTimer,setTimer1,setTimer2,setTimer3,hideTimer,$c=sugTemplate.prototype.$c,handleFlag=handleRetry,vrFlag={},cur_li=-1,isKeyTime=false,mouseTime_li=-1;that.sw=function(kw,sw){if(!sw){try{handleData(["",[]])}catch(E){}}on=sw||false;noneed_query=kw||"";showtop=true;if(suggDiv){hideDiv()}};function $(elemid){return d.getElementById(elemid)}function bind(elem,evt,func){if(elem){return elem.addEventListener?elem.addEventListener(evt,func,false):elem.attachEvent("on"+evt,func)}}function pingback(action_name){var now=new Date();var uigs_t=(now.getTime())*1000+Math.round(Math.random()*1000);var uigs_productid="";if(sugType!=""){uigs_productid="sugg"+sugType}var url1=["http://pb.sogou.com/pv.gif","?uigs_productid=",encodeURIComponent(uigs_productid),"&uigs_t=",uigs_t,"&w=",encodeURIComponent(input_elem.value),"&k=",encodeURIComponent(userInputString),"&s="];url1.push((suggestWordId!=-1)?"t":"f");if(suggestWordId!=-1){url1.push("&stj0="+jsonDataTongji0[suggestWordId]);url1.push("&stj1="+jsonDataTongji1[suggestWordId])}url1.push("&hp="+hasPersonal);url1.push("&hp1="+hasPersonal1);if(suggestWordId!=-1){url1.push("&cline=");url1.push(suggestWordId)}if(action_name){url1.push("&act=");url1.push(encodeURIComponent(action_name))}url1.push("&r="+now.getSeconds());url1.push("&abtestid="+encodeURIComponent(abtestid));url1.push("&uk="+(useKey?1:0));url1.push("&sbby="+(submitby));(new Image()).src=url1.join("")}function init(){if(!$(inputid)){setTimeout(init,50);return}initStyle();input_elem=$(inputid);input_form=input_elem.parentNode;while(input_form&&input_form.tagName.toLowerCase()!="form"){input_form=input_form.parentNode}if(!input_form){return}if(myPara.reset){input_form.reset()}input_elem.setAttribute("autocomplete","off");bind(input_elem,"mousedown",mousedown);bind(input_elem,"keydown",keydown);noneed_query=input_elem.value;checkQuery()}function mousedown(){if(firstRun){start()}if(myPara.oms){noneed_query="";lastinput_query=""}showtop=false}function positionDiv(){var inputBox=getPositionAndSize(useParent?input_elem.parentNode:input_elem);var isIndex=(location.href.indexOf("query=")>0)?false:true;suggDiv.style.top=(inputBox[1]+inputBox[3]+(isIndex?-1:0))+"px";suggDiv.style.left=(inputBox[0]+(isIndex?0:-1))+"px"}function getPositionAndSize(ele){var x=0,y=0,w=ele.offsetWidth,h=ele.offsetHeight;if(ele){x+=ele.offsetLeft;y+=ele.offsetTop;ele=ele.offsetParent}return[0,y,578,h]}function getQuery(){return input_elem.value}function checkQuery(){if(getQuery()!=noneed_query){showtop=false;start();return}setTimeout(checkQuery,10)}function checkQuery2(){var curr_query=getQuery();if(curr_query&&noneed_query!=curr_query&&lastinput_query==curr_query){if(!sending_timer){sending_timer=setTimeout(function(){noneed_query="";suggestWordId=-1;needData(curr_query)},100)}}else{clearTimeout(sending_timer);sending_timer=0;if(!curr_query){if(!showtop){showTopWord()}}lastinput_query=curr_query}if(curr_query){showtop=false}setTimeout(checkQuery2,10)}var sctop,toptimer,showtop=false;function showTopWord(){clearTimeout(toptimer);if(typeof sogou_top_words=="undefined"){if(!sctop){sctop=d.createElement("script");sctop.charset="gb2312";sctop.src="http://top.sogou.com/top_index.js?v="+((new Date()).getTime());d.body.appendChild(sctop)}toptimer=setTimeout(showTopWord,50);return}if(!getQuery()){showtop=true;userInputString="";var suggList=suggDiv.getElementsByTagName("ul")[0],tmpLi;while(suggList.childNodes.length>0){suggList.removeChild(suggList.childNodes[0])}suggLis=[];suggOText=[];jsonData=sogou_top_words;for(var i=0;i<jsonData.length&&i<10;i++){tmpLi=d.createElement("li");tmpLi.style.height="27px";tmpLi.onmouseover=mouseOver;tmpLi.onmouseout=mouseOut;tmpLi.onmousedown=mouseDown;tmpLi.onclick=mouseClick;tmpLi.setAttribute("lid",i);tmpLi.innerHTML="<em class='n0' style='background:url(http://www.sogou.com/sug/images/n_"+(i+1)+".gif) no-repeat;'></em>"+jsonData[i]+(i==0?' <img src="http://www.sogou.com/sug/images/new2.gif" align="absmiddle" />':"");vrFlag[jsonData[i]]=0;suggLis.push(tmpLi);suggOText.push(tmpLi.innerHTML);suggList.appendChild(tmpLi)}positionDiv();showDiv(isShowing());tophint.style.display="";if(contentDiv){contentDiv.style.display="none";suggDiv.className="suggestion nobg"}}}function needData(query){if(!input_time){input_time=new Date().getTime()}if(cache[query]){handleData(cache[query])}else{var EEE;try{d.body.removeChild(ajaj)}catch(EEE){}ajaj=d.createElement("script");ajaj.charset="gb2312";ajaj.src=suggUri+"?key="+encodeURIComponent(query)+"&type="+sugType+"&ori=yes&pr="+productId+"&abtestid="+abtestid+"&ipn="+ipn;d.body.appendChild(ajaj)}}if(typeof window.sogou!="object"||window.sogou==null){window.sogou={}}if(typeof window.sogou.sug!="undefined"){oldfunc=window.sogou.sug}window.sogou.sug=function(result_array){try{oldfunc(result_array)}catch(E){}cache[result_array[0]]=result_array;handleData(result_array)};if(typeof window.sogou.site!="undefined"){oldfunc2=window.sogou.site}window.sogou.site=function(result_array){clearTimeout(setTimer1);clearTimeout(setTimer2);clearTimeout(setTimer3);try{oldfunc2(result_array)}catch(E){}if(result_array){if(result_array.doc_num!=0){handleFlag=handleRetry;sitecache[decodeURIComponent(result_array.query)]=result_array;handleSiteData(result_array)}else{var cur_query=null;for(var i=0;i<suggLis.length;i++){if(suggLis[i].className=="over"){cur_query=jsonData[i]}}if(handleFlag>0&&cur_query==decodeURIComponent(result_array.query)){handleFlag--;handleSiteData(result_array,handleFlag)}}}};function escapeForSpecialChars(input){if(input!=null){return input.replace(/&/g,"&amp;").replace(/ /g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}else{return""}}function bold(data,input){var ret=data;if(data.indexOf(input)==0){ret=input+"<b>"+data.substr(input.length)+"</b>"}return ret}function unbold(data){return data.replace("<b>","").replace("</b>","")}function handleData(results){if(firstRun){return}if(!getQuery()){return}userInputString=results[0]||userInputString;jsonData=results[1];if(results.length>2){jsonDataTongji=results[2];jsonDataTongji0=[];jsonDataTongji1=[];goTongjiId=[];for(var k=0;k<jsonDataTongji.length;++k){var tempTongji=jsonDataTongji[k].split(";");vrFlag[results[1][k]]=tempTongji[2];if(tempTongji!=null&&tempTongji.length>=2){jsonDataTongji0.push(tempTongji[0]);jsonDataTongji1.push(tempTongji[1])}else{jsonDataTongji0.push(-1);jsonDataTongji1.push(0)}goTongjiId.push(0)}}if(results.length>3){hasPersonal1=results[3][0]}var i=0,j;clearHighlight();highlight_li=-1;positionDiv();var show=isShowing();showDiv("show");var suggList=suggDiv.getElementsByTagName("ul")[0],tmpLi;while(suggList.childNodes.length>0){suggList.removeChild(suggList.childNodes[0])}suggLis=[];suggOText=[];for(var i=0;i<jsonData.length&&i<10;i++){tmpLi=d.createElement("li");tmpLi.onmouseover=mouseOver;tmpLi.onmouseout=mouseOut;tmpLi.onmousedown=mouseDown;tmpLi.onclick=mouseClick;tmpLi.setAttribute("lid",i);tmpLi.innerHTML=bold(escapeForSpecialChars(jsonData[i]),escapeForSpecialChars(userInputString));if(vrFlag[jsonData[i]]==1){tmpLi.innerHTML+="<span></span>"}suggLis.push(tmpLi);suggOText.push(tmpLi.innerHTML);suggList.appendChild(tmpLi);sugTemplate.prototype.cutTitle(tmpLi,tmpLi.innerHTML)}hideDiv();if((jsonData.length>0||newPara)&&on&&suggLis.length>0){suggLis[0].className="first";positionDiv();showDiv(show);handleFlag=handleRetry;selectItem(0)}if(jsonData.length==0||!on){hideDiv()}}function stopEvent(evt){if(evt.preventDefault){evt.preventDefault()}evt.cancelBubble=true;return evt.returnValue=false}var useKey=false,submitby="default";function keydown(evt){evt=evt||window.event;if(firstRun){if(evt.keyCode==27){return}start()}if(!input_time){input_time=new Date().getTime()}if(evt.keyCode==27){if(isShowing()){hideDiv();noneed_query=input_elem.value;setTimeout(function(){noneed_query=input_elem.value},1)}}else{if(evt.keyCode==13){hideDiv();submitby="enter";try{if(input_form.enter){input_form.enter.value="1"}}catch(e){}input_form.onsubmit&&input_form.onsubmit()==false||input_form.submit();return stopEvent(evt)}else{if(isShowing()){if(evt.keyCode==38){useKey=true;upKey();return stopEvent(evt)}else{if(evt.keyCode==9||evt.keyCode==40){useKey=true;downKey();return stopEvent(evt)}}}else{if((evt.keyCode==38)||(evt.keyCode==40)){useKey=true;getQuery()&&needData(getQuery())}}}}}function downKey(){if(!suggDiv.onmousemove){suggDiv.onmousemove=mouseMove}isKeyTime=true;clearTimeout(setTimer3);highlight_li++;if(highlight_li==Math.min(jsonData.length,10)){highlight_li=-1}highlight()}function upKey(){if(!suggDiv.onmousemove){suggDiv.onmousemove=mouseMove}isKeyTime=true;clearTimeout(setTimer3);clearHighlight();highlight_li--;if(highlight_li==-2){highlight_li=Math.min(jsonData.length,10)-1}highlight()}function highlight(){clearHighlight();if(highlight_li>=0){suggLis[highlight_li].className="over";input_elem.value=unbold(jsonData[highlight_li]);handleFlag=handleRetry;selectItem(highlight_li)}else{input_elem.value=userInputString}suggestWordId=highlight_li;noneed_query=input_elem.value}function listHighlight(){clearHighlight();if(highlight_li>=0){suggLis[highlight_li].className="over"}}function clearHighlight(){for(var i=0;i<suggLis.length;i++){suggLis[i].className=""}}function mouseMove(){suggDiv.onmousemove=null;isKeyTime=false;clearTimeout(hideTimer);hideTimer=setTimeout(function(){var li=null;if(mouseTime_li>=0&&(li=suggLis[mouseTime_li])){clearHighlight();li.className="over";highlight_li=mouseTime_li;handleFlag=handleRetry;selectItem(highlight_li)}mouseTime_li=-1},50)}function mouseOut(){clearTimeout(hideTimer)}function mouseOver(){mouseTime_li=parseInt(this.getAttribute("lid"));if(isKeyTime){return}clearHighlight();this.className="over";clearTimeout(setTimer3);clearTimeout(hideTimer);var that=this;hideTimer=setTimeout(function(){clearHighlight();that.className="over";highlight_li=parseInt(that.getAttribute("lid"));handleFlag=handleRetry;selectItem(highlight_li)},100)}function mouseDown(event){if(event&&event.stopPropagation){event.stopPropagation()}mousedown_ontr=1;return false}function mouseClick(){suggestWordId=parseInt(this.getAttribute("lid"));input_elem.value=jsonData[suggestWordId];noneed_query=input_elem.value;hideDiv();submitby="mouse";input_form.onsubmit&&input_form.onsubmit()==false||input_form.submit()}function isShowing(){return(suggDiv&&(suggDiv.style.display=="block"))}function showDiv(showOrNot){if(!showOrNot){pingback("show_s")}tophint.style.display="none";suggDiv.style.display="block";if(suggIfm){suggIfm.style.display="block"}try{if(!useParent){input_elem.offsetParent.appendChild(suggDiv);input_elem.offsetParent.appendChild(suggIfm)}else{input_elem.parentNode.offsetParent.appendChild(suggDiv);input_elem.parentNode.offsetParent.appendChild(suggIfm)}}catch(e){}}function selectItem(lino){if(vrFlag[jsonData[lino]]!=1){if(contentDiv.style.display!="none"){contentDiv.style.display="none";suggDiv.className="suggestion nobg";template.revertAllTitle(suggLis,suggOText)}}else{if(contentDiv.style.display=="none"){getSiteData(jsonData[lino],lino);template.cutAllTitle(suggLis,suggOText)}else{getSiteData(jsonData[lino],lino)}}}function hideDiv(){suggDiv.style.display="none";if(suggIfm){suggIfm.style.display="none"}try{if(!useParent){input_elem.offsetParent.removeChild(suggDiv);input_elem.offsetParent.removeChild(suggIfm)}else{input_elem.parentNode.offsetParent.removeChild(suggDiv);input_elem.parentNode.offsetParent.removeChild(suggIfm)}}catch(e){}}function initStyle(){var fileref=$c("link");fileref.setAttribute("rel","stylesheet");fileref.setAttribute("type","text/css");var cssname=location.href.indexOf("query=")>0?"m2":"m";fileref.setAttribute("href",server_url+"sug/css/"+cssname+".v.13.css");d.getElementsByTagName("head")[0].appendChild(fileref)}function computePersonal(){var num=0;if(jsonDataTongji1==null||jsonDataTongji1.length<1){return 0}for(var i=0;i<jsonDataTongji1.length;++i){var tongji=parseInt(jsonDataTongji1[i]);num+=tongji}return num}function start(){if(!firstRun){return}firstRun=0;noneed_query=input_elem.value;normalRid=normalRid||((input_form.w&&input_form.w.value)?input_form.w.value:normalRid);if(suggUri.indexOf("http://")!=0){suggUri="http://"+suggUri}var old_submit=input_form.onsubmit||function(){};function form_submit(a,b,c){if((typeof old_submit)=="function"){if(old_submit(a,b,c)==false){return false}}increaseSct();hasPersonal=computePersonal();var query_inputs={w:normalRid};if(suggestWordId!=-1){query_inputs={w:suggestRid,oq:userInputString,ri:suggestWordId,sourceid:"sugg"};if(jsonDataTongji.length>0){query_inputs={w:suggestRid,oq:userInputString,ri:suggestWordId,sourceid:"sugg",stj:jsonDataTongji[suggestWordId],stj2:goTongjiId[suggestWordId],stj0:jsonDataTongji0[suggestWordId],stj1:jsonDataTongji1[suggestWordId],hp:hasPersonal,hp1:hasPersonal1}}}query_inputs.sut=(input_time?(new Date().getTime()-input_time):0);query_inputs.sst0=new Date().getTime();if(showtop){query_inputs.p=normalRid=="01019900"?"40040108":"40240100"}var form_inputs=input_form.getElementsByTagName("input"),i,tmp_input;for(var input_name in query_inputs){for(i=0;i<form_inputs.length;i++){if(form_inputs[i].getAttribute("name")==input_name){form_inputs[i].value=query_inputs[input_name];break}}if(i==form_inputs.length){tmp_input=d.createElement("input");tmp_input.type="hidden";tmp_input.name=input_name;tmp_input.value=query_inputs[input_name];input_form.appendChild(tmp_input)}}pingback("sb");return true}input_form.onsubmit=form_submit;function createDiv(){if(isIe){input_elem.offsetParent.style.position="relative";var tmp=input_elem.offsetParent;while(tmp){if(!(parseInt(tmp.currentStyle.zIndex))){tmp.style.zIndex="2000"}tmp=tmp.offsetParent}}suggDiv=$c("div",null,"suggestion nobg");suggDiv.id="vl";var tmpLi,innerDiv=$c("div",suggDiv,"suginner"),tt=$c("p",innerDiv,"s_title"),suggList=$c("ul",innerDiv,"suglist");tophint=tt;tophint.innerHTML="今日热词";tophint.style.display="none";tophint.style.margin="0";suggLis=[];for(var i=0;i<10;i++){tmpLi=d.createElement("li");tmpLi.onmouseover=mouseOver;tmpLi.onmouseout=mouseOut;tmpLi.onmousedown=mouseDown;tmpLi.onclick=mouseClick;tmpLi.setAttribute("lid",i);suggLis.push(tmpLi);suggList.appendChild(tmpLi)}contentDiv=$c("div",innerDiv,"sugc");contentDiv.id="sugc";contentDiv.onmouseover=function(){mouseTime_li=-1};contentDiv.style.display="none";suggList.onmouseout=listHighlight}createDiv();bind(d,"click",function(evt){evt=evt||window.event;var ele=evt.srcElement||evt.target;while(ele){if(ele==contentDiv||ele==input_elem){return}ele=ele.parentNode}hideDiv()});bind(input_elem,"beforedeactivate",function(){if(mousedown_ontr){window.event.cancelBubble=true;window.event.returnValue=false;mousedown_ontr=0}});checkQuery2()}function getCookie(){var dc=d.cookie;var prefix="sct=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!=0){return null}}else{begin+=2}var end=dc.indexOf(";",begin);if(end==-1){end=dc.length}return dc.substring(begin+prefix.length,end)}function increaseSct(){var sct=parseInt(getCookie()||0)||0;document.cookie="sct="+(sct+1)+"; expires=Thu, 21-Jul-2020 00:00:00 GMT; path=/;domain=sogou.com;"}var oldclick=d.onclick||function(){};d.onclick=function(evt){var ret=oldclick(evt);page_click(evt);return ret};function page_click(evt){if((evt&&(evt.button!=0))||((!evt)&&(window.event.button!=0))){return}evt=evt||window.event;var srcElem=((evt.target)?evt.target:evt.srcElement),h;while(srcElem&&srcElem.tagName){if(srcElem.tagName.toUpperCase()=="A"){h=srcElem.href||"";if(h.indexOf("http://www.sogou.com/")==0&&h.indexOf("query=")>0){increaseSct()}return}srcElem=srcElem.parentNode}}function getSiteData(txt,pos,cnt){contentDiv.style.display="";suggDiv.className="suggestion";txt=unbold(txt||"");cnt=cnt||0;if(!txt){return}if(contentDiv){if(cnt==0){contentDiv.innerHTML=""}}if(sitecache[txt]){handleSiteData(sitecache[txt])}else{txt=encodeURIComponent(txt);try{d.body.removeChild(ajaj2)}catch(EEE){}ajaj2=d.createElement("script");var iploc=null;if(document.cookie.length>0&&document.cookie.indexOf("IPLOC=")>=0){var c_start=document.cookie.indexOf("IPLOC=")+6,c_end=document.cookie.indexOf(";",c_start)==-1?document.cookie.length:document.cookie.indexOf(";",c_start);iploc=document.cookie.substring(c_start,c_end)}if(!/CN[0-9]{4,6}/.exec(iploc)){iploc="CN110000"}while(iploc.legnth<6){iploc+="0"}ajaj2.charset="gb2312";ajaj2.src="http://go.sugg.sogou.com/"+txt+"?"+(new Date().getTime())+"&rid="+(txt.toLowerCase().charCodeAt(txt.length-1)%6)+"&IPLOC="+iploc;clearTimeout(setTimer2);setTimer2=setTimeout(function(){contentDiv.innerHTML='<div class="loading">正在载入，请稍后...</div>'},100);clearTimeout(setTimer1);setTimer1=setTimeout(function(){if(cnt<MAX_RETRY_FETCH_SITE-1){txt=decodeURIComponent(txt);getSiteData(txt,pos,cnt+1)}else{template.pv(txt,-999,pos,0)}},500);d.body.appendChild(ajaj2)}}function handleSiteData(data,cnt){cnt=cnt||0;if(contentDiv){if(cnt==0){contentDiv.innerHTML=""}if(!template.build(contentDiv,data,jsonData,goTongjiId)){if(contentDiv.innerHTML!='<div class="loading">正在载入，请稍后...</div>'){contentDiv.innerHTML='<div class="loading">正在载入，请稍后...</div>'}clearTimeout(setTimer1);clearTimeout(setTimer3);if(data.query){for(var i=0;i<jsonData.length;i++){if(jsonData[i]==decodeURIComponent(data.query)){pos=i;break}}setTimer3=setTimeout(function(){getSiteData(decodeURIComponent(data.query),pos,MAX_RETRY_FETCH_SITE-1)},500)}}}}template.getSiteData=getSiteData;init();sugTemplate.prototype.buildZhiDa=function(div,context,tempCode){var loopPtn=/<!--\s*LOOP\s+SET=\$\{(.*?)\}.*?-->/,endPtn=/<!--\s*ENDLOOP\s*-->/,loopMat=null,endMat=null;while(loopMat=loopPtn.exec(tempCode)){var leftContent=RegExp.leftContext;var setCode=loopMat[1];endMat=endPtn.exec(tempCode);var rightContent=RegExp.rightContext;var loopCode=tempCode.substring(loopMat.index+loopMat[0].length,endMat.index);var loopContent="";with(context){var setVar=eval(setCode)}for(var i in setVar){var item=setVar[i];context.item=item;context.i=i;loopContent+=this.replaceZhidaTemp(loopCode,context)}tempCode=leftContent+loopContent+rightContent}div.innerHTML=this.replaceZhidaTemp(tempCode,context)};sugTemplate.prototype.replaceZhidaTemp=function(code,context){var varPtn=/\$\{(.*?)\}|\$%7B(.*?)%7D/g;var varMat=null;var head=0,tail=0;var k=0;var content="";while(varMat=varPtn.exec(code)){tail=varMat.index;content+=code.substring(head,tail);with(context){content+=eval((varMat[1]?varMat[1]:varMat[2]))}head=tail+varMat[0].length}content+=code.substring(head,code.length);return content}}var smugg=new sogouSugg();